<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Award í‰ê°€í•˜ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .star {
            cursor: pointer;
            font-size: 2.5rem;
            color: #d1d5db;
            transition: color 0.2s;
        }
        .star.active {
            color: #fbbf24;
        }
        .star:hover {
            color: #fbbf24;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-2xl">
        <div class="bg-white rounded-2xl shadow-2xl p-8">
            <h1 class="text-3xl font-bold text-center text-indigo-600 mb-8">ğŸ† Award í‰ê°€í•˜ê¸°</h1>
            
            <div id="loadingState" class="text-center py-12">
                <p class="text-gray-600">í‰ê°€ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
            </div>

            <div id="noAwardState" class="hidden text-center py-12">
                <p class="text-xl text-gray-600">í˜„ì¬ ì§„í–‰ ì¤‘ì¸ í‰ê°€ê°€ ì—†ìŠµë‹ˆë‹¤</p>
                <p class="text-sm text-gray-400 mt-2">ê´€ë¦¬ìê°€ í‰ê°€ë¥¼ ì‹œì‘í•  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”</p>
            </div>

            <div id="evaluationForm" class="hidden">
                <div class="bg-indigo-50 rounded-lg p-6 mb-6">
                    <h2 class="text-xl font-bold text-gray-800 mb-4" id="awardTitle"></h2>
                    
                    <div class="space-y-2 text-sm">
                        <div>
                            <span class="font-semibold text-indigo-600">ğŸ‘‘ Impact Maker:</span>
                            <span id="impactMaker" class="text-gray-700 ml-2"></span>
                        </div>
                        <div>
                            <span class="font-semibold text-indigo-600">ğŸ’ª Core Member:</span>
                            <span id="coreMember" class="text-gray-700 ml-2"></span>
                        </div>
                        <div>
                            <span class="font-semibold text-indigo-600">âœ¨ Special Thanks:</span>
                            <span id="specialThanks" class="text-gray-700 ml-2"></span>
                        </div>
                    </div>
                </div>

                <div class="space-y-8">
                    <div>
                        <label class="block text-lg font-semibold text-gray-800 mb-4">
                            Q1. ì´ Awardì˜ ì˜í–¥ë ¥ì€?
                        </label>
                        <div class="flex justify-center gap-2 mb-4" id="starRating">
                            <span class="star" data-value="1">â­</span>
                            <span class="star" data-value="2">â­</span>
                            <span class="star" data-value="3">â­</span>
                            <span class="star" data-value="4">â­</span>
                            <span class="star" data-value="5">â­</span>
                        </div>
                        <button id="dontKnowImpact" class="w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-lg transition">
                            ì˜ ëª¨ë¥´ê² ìŒ
                        </button>
                    </div>

                    <div>
                        <label class="block text-lg font-semibold text-gray-800 mb-4">
                            Q2. ì´ Awardì˜ ìœ í˜•ì€?
                        </label>
                        <div class="space-y-3">
                            <button class="award-type w-full bg-white border-2 border-gray-200 hover:border-indigo-500 hover:bg-indigo-50 text-gray-700 py-3 rounded-lg transition" data-type="ë…¸ë ¥í˜•">
                                ğŸ’ª ë…¸ë ¥í˜•
                            </button>
                            <button class="award-type w-full bg-white border-2 border-gray-200 hover:border-indigo-500 hover:bg-indigo-50 text-gray-700 py-3 rounded-lg transition" data-type="í˜ì‹ í˜•">
                                ğŸš€ í˜ì‹ í˜•
                            </button>
                            <button class="award-type w-full bg-white border-2 border-gray-200 hover:border-indigo-500 hover:bg-indigo-50 text-gray-700 py-3 rounded-lg transition" data-type="ì°½ì¡°í˜•">
                                ğŸ¨ ì°½ì¡°í˜•
                            </button>
                            <button class="award-type w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-lg transition" data-type="ì˜ ëª¨ë¥´ê² ìŒ">
                                â“ ì˜ ëª¨ë¥´ê² ìŒ
                            </button>
                        </div>
                    </div>

                    <button id="submitBtn" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 rounded-lg transition text-lg">
                        í‰ê°€ ì œì¶œí•˜ê¸°
                    </button>
                </div>
            </div>

            <div id="successState" class="hidden text-center py-12">
                <div class="text-6xl mb-4">âœ…</div>
                <p class="text-2xl font-bold text-green-600 mb-2">í‰ê°€ ì™„ë£Œ!</p>
                <p class="text-gray-600">ì†Œì¤‘í•œ ì˜ê²¬ ê°ì‚¬í•©ë‹ˆë‹¤</p>
                <button id="newEvaluationBtn" class="mt-6 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-lg">
                    ë‹¤ì‹œ í‰ê°€í•˜ê¸°
                </button>
            </div>
        </div>
    </div>

    <script>
        let selectedRating = 0;
        let selectedType = '';
        let currentAwardId = null;

        function getState() {
            return JSON.parse(localStorage.getItem('awardVotingState') || '{"awards":[],"evaluations":[]}');
        }

        function saveState(state) {
            localStorage.setItem('awardVotingState', JSON.stringify(state));
        }

        // ë³„ì  ì„ íƒ
        document.querySelectorAll('.star').forEach(star => {
            star.addEventListener('click', () => {
                selectedRating = parseInt(star.dataset.value);
                updateStars();
            });
        });

        function updateStars() {
            document.querySelectorAll('.star').forEach((star, index) => {
                if (index < selectedRating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        // ì˜ ëª¨ë¥´ê² ìŒ (ì˜í–¥ë ¥)
        document.getElementById('dontKnowImpact').addEventListener('click', () => {
            selectedRating = -1;
            document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
        });

        // Award ìœ í˜• ì„ íƒ
        document.querySelectorAll('.award-type').forEach(btn => {
            btn.addEventListener('click', () => {
                selectedType = btn.dataset.type;
                document.querySelectorAll('.award-type').forEach(b => {
                    b.classList.remove('border-indigo-500', 'bg-indigo-50');
                    b.classList.add('border-gray-200', 'bg-white');
                });
                btn.classList.remove('border-gray-200', 'bg-white');
                btn.classList.add('border-indigo-500', 'bg-indigo-50');
            });
        });

        // í˜„ì¬ í‰ê°€ ì¤‘ì¸ Award ê°€ì ¸ì˜¤ê¸°
        function loadCurrentAward() {
            const state = getState();
            const currentAward = state.awards.find(a => a.isActive);

            if (!currentAward) {
                document.getElementById('loadingState').classList.add('hidden');
                document.getElementById('noAwardState').classList.remove('hidden');
                document.getElementById('evaluationForm').classList.add('hidden');
                return;
            }

            currentAwardId = currentAward.id;
            document.getElementById('awardTitle').textContent = currentAward.title;
            document.getElementById('impactMaker').textContent = currentAward.impactMaker || '-';
            document.getElementById('coreMember').textContent = currentAward.coreMember || '-';
            document.getElementById('specialThanks').textContent = currentAward.specialThanks || '-';

            document.getElementById('loadingState').classList.add('hidden');
            document.getElementById('noAwardState').classList.add('hidden');
            document.getElementById('evaluationForm').classList.remove('hidden');
            document.getElementById('successState').classList.add('hidden');
        }

        // í‰ê°€ ì œì¶œ
        document.getElementById('submitBtn').addEventListener('click', () => {
            if (selectedRating === 0 || !selectedType) {
                alert('ëª¨ë“  ë¬¸í•­ì— ë‹µë³€í•´ì£¼ì„¸ìš”!');
                return;
            }

            const state = getState();

            state.evaluations.push({
                awardId: currentAwardId,
                rating: selectedRating,
                type: selectedType,
                timestamp: new Date().toISOString()
            });

            saveState(state);

            document.getElementById('evaluationForm').classList.add('hidden');
            document.getElementById('successState').classList.remove('hidden');
        });

        // ë‹¤ì‹œ í‰ê°€í•˜ê¸°
        document.getElementById('newEvaluationBtn').addEventListener('click', () => {
            selectedRating = 0;
            selectedType = '';
            updateStars();
            document.querySelectorAll('.award-type').forEach(b => {
                b.classList.remove('border-indigo-500', 'bg-indigo-50');
                b.classList.add('border-gray-200', 'bg-white');
            });
            document.getElementById('successState').classList.add('hidden');
            loadCurrentAward();
        });

        // 1ì´ˆë§ˆë‹¤ ìƒˆë¡œìš´ Award í™•ì¸
        setInterval(loadCurrentAward, 1000);
        loadCurrentAward();
    </script>
</body>
</html>
